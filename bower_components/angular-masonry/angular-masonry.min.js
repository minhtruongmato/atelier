/*!
 * angular-masonry 0.16.0
 * Pascal Hartig, https://passy.me/
 * License: MIT
 */
(function(){angular.module("wu.masonry",[]).controller("MasonryCtrl",["$scope","$element","$timeout",function b(o,p,h){var g={};var j=[];var q=false;var r=this;var l=null;this.preserveOrder=false;this.loadImages=true;this.scheduleMasonryOnce=function i(){var s=arguments;var t=j.filter(function u(v){return v[0]===s[0]}).length>0;if(!t){this.scheduleMasonry.apply(null,arguments)}};this.scheduleMasonry=function f(){if(l){h.cancel(l)}j.push([].slice.call(arguments));l=h(function s(){if(q){return}j.forEach(function t(u){p.masonry.apply(p,u)});j=[]},30)};function k(s){s.addClass("loaded")}this.addBrick=function m(x,t,w){if(q){return}function u(){if(Object.keys(g).length===0){p.masonry("resize")}if(g[w]===undefined){g[w]=true;k(t);p.masonry(x,t,true)}}function v(){r.scheduleMasonryOnce("layout")}if(!r.loadImages){u();v()}else{if(r.preserveOrder){u();t.imagesLoaded(v)}else{t.imagesLoaded(function s(){u();v()})}}};this.removeBrick=function e(t,s){if(q){return}delete g[t];p.masonry("remove",s);this.scheduleMasonryOnce("layout")};this.destroy=function n(){q=true;if(p.data("masonry")){p.masonry("destroy")}o.$emit("masonry.destroyed");g={}};this.reload=function d(){p.masonry();o.$emit("masonry.reloaded")}}]).directive("masonry",function a(){return{restrict:"AE",controller:"MasonryCtrl",link:{pre:function d(l,g,k,e){var i=l.$eval(k.masonry||k.masonryOptions);var m=angular.extend({itemSelector:k.itemSelector||".masonry-brick",columnWidth:parseInt(k.columnWidth,10)||k.columnWidth},i||{});g.masonry(m);l.masonryContainer=g[0];var n=l.$eval(k.loadImages);e.loadImages=n!==false;var j=l.$eval(k.preserveOrder);e.preserveOrder=j!==false&&k.preserveOrder!==undefined;var h=l.$eval(k.reloadOnShow);if(h!==false&&k.reloadOnShow!==undefined){l.$watch(function(){return g.prop("offsetParent")},function(o,p){if(o&&!p){e.reload()}})}var f=l.$eval(k.reloadOnResize);if(f!==false&&k.reloadOnResize!==undefined){l.$watch("masonryContainer.offsetWidth",function(p,o){if(p!=o){e.reload()}})}l.$emit("masonry.created",g);l.$on("$destroy",e.destroy)}}}}).directive("masonryBrick",function c(){return{restrict:"AC",require:"^masonry",scope:true,link:{pre:function d(h,g,f,i){var l=h.$id,e;var j=h.$eval(f.prepend);var k=j?"prepended":"appended";i.addBrick(k,g,l);g.on("$destroy",function(){i.removeBrick(l,g)});h.$on("masonry.reload",function(){i.scheduleMasonryOnce("reloadItems");i.scheduleMasonryOnce("layout")});h.$watch("$index",function(){if(e!==undefined&&e!==h.$index){i.scheduleMasonryOnce("reloadItems");i.scheduleMasonryOnce("layout")}e=h.$index})}}}})}());