/*! Stellar.js v0.6.2 | Copyright 2014, Mark Dalgleish | http://markdalgleish.com/projects/stellar.js | http://markdalgleish.mit-license.org */
;!function(D,C,B,A){function z(a,d){this.element=a,this.options=D.extend({},x,d),this._defaults=x,this._name=y,this.init()}var y="stellar",x={scrollProperty:"scroll",positionProperty:"position",horizontalScrolling:!0,verticalScrolling:!0,horizontalOffset:0,verticalOffset:0,responsive:!1,parallaxBackgrounds:!0,parallaxElements:!0,hideDistantElements:!0,hideElement:function(b){b.hide()},showElement:function(b){b.show()}},w={scroll:{getLeft:function(b){return b.scrollLeft()},setLeft:function(d,c){d.scrollLeft(c)},getTop:function(b){return b.scrollTop()},setTop:function(d,c){d.scrollTop(c)}},position:{getLeft:function(b){return -1*parseInt(b.css("left"),10)},getTop:function(b){return -1*parseInt(b.css("top"),10)}},margin:{getLeft:function(b){return -1*parseInt(b.css("margin-left"),10)},getTop:function(b){return -1*parseInt(b.css("margin-top"),10)}},transform:{getLeft:function(d){var c=getComputedStyle(d[0])[t];return"none"!==c?-1*parseInt(c.match(/(-?[0-9]+)/g)[4],10):0},getTop:function(d){var c=getComputedStyle(d[0])[t];return"none"!==c?-1*parseInt(c.match(/(-?[0-9]+)/g)[5],10):0}}},v={position:{setLeft:function(d,c){d.css("left",c)},setTop:function(d,c){d.css("top",c)}},transform:{setPosition:function(g,f,j,i,h){g[0].style[t]="translate3d("+(f-j)+"px, "+(i-h)+"px, 0)"}}},u=function(){var a,h=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,g=D("script")[0].style,f="";for(a in g){if(h.test(a)){f=a.match(h)[0];break}}return"WebkitOpacity" in g&&(f="Webkit"),"KhtmlOpacity" in g&&(f="Khtml"),function(b){return f+(f.length>0?b.charAt(0).toUpperCase()+b.slice(1):b)}}(),t=u("transform"),s=D("<div />",{style:"background:#fff"}).css("background-position-x")!==A,r=s?function(e,d,f){e.css({"background-position-x":d,"background-position-y":f})}:function(e,d,f){e.css("background-position",d+" "+f)},q=s?function(b){return[b.css("background-position-x"),b.css("background-position-y")]}:function(b){return b.css("background-position").split(" ")},p=C.requestAnimationFrame||C.webkitRequestAnimationFrame||C.mozRequestAnimationFrame||C.oRequestAnimationFrame||C.msRequestAnimationFrame||function(b){setTimeout(b,1000/60)};z.prototype={init:function(){this.options.name=y+"_"+Math.floor(1000000000*Math.random()),this._defineElements(),this._defineGetters(),this._defineSetters(),this._handleWindowLoadAndResize(),this._detectViewport(),this.refresh({firstLoad:!0}),"scroll"===this.options.scrollProperty?this._handleScrollEvent():this._startAnimationLoop()},_defineElements:function(){this.element===B.body&&(this.element=C),this.$scrollElement=D(this.element),this.$element=this.element===C?D("body"):this.$scrollElement,this.$viewportElement=this.options.viewportElement!==A?D(this.options.viewportElement):this.$scrollElement[0]===C||"scroll"===this.options.scrollProperty?this.$scrollElement:this.$scrollElement.parent()},_defineGetters:function(){var d=this,c=w[d.options.scrollProperty];this._getScrollLeft=function(){return c.getLeft(d.$scrollElement)},this._getScrollTop=function(){return c.getTop(d.$scrollElement)}},_defineSetters:function(){var a=this,j=w[a.options.scrollProperty],i=v[a.options.positionProperty],h=j.setLeft,g=j.setTop;this._setScrollLeft="function"==typeof h?function(b){h(a.$scrollElement,b)}:D.noop,this._setScrollTop="function"==typeof g?function(b){g(a.$scrollElement,b)}:D.noop,this._setPosition=i.setPosition||function(b,m,l,k,d){a.options.horizontalScrolling&&i.setLeft(b,m,l),a.options.verticalScrolling&&i.setTop(b,k,d)}},_handleWindowLoadAndResize:function(){var b=this,a=D(C);b.options.responsive&&a.bind("load."+this.name,function(){b.refresh()}),a.bind("resize."+this.name,function(){b._detectViewport(),b.options.responsive&&b.refresh()})},refresh:function(h){var g=this,b=g._getScrollLeft(),a=g._getScrollTop();h&&h.firstLoad||this._reset(),this._setScrollLeft(0),this._setScrollTop(0),this._setOffsets(),this._findParticles(),this._findBackgrounds(),h&&h.firstLoad&&/WebKit/.test(navigator.userAgent)&&D(C).load(function(){var d=g._getScrollLeft(),c=g._getScrollTop();g._setScrollLeft(d+1),g._setScrollTop(c+1),g._setScrollLeft(d),g._setScrollTop(c)}),this._setScrollLeft(b),this._setScrollTop(a)},_detectViewport:function(){var d=this.$viewportElement.offset(),c=null!==d&&d!==A;this.viewportWidth=this.$viewportElement.width(),this.viewportHeight=this.$viewportElement.height(),this.viewportOffsetTop=c?d.top:0,this.viewportOffsetLeft=c?d.left:0},_findParticles:function(){var a=this;this._getScrollLeft(),this._getScrollTop();if(this.particles!==A){for(var d=this.particles.length-1;d>=0;d--){this.particles[d].$element.data("stellar-elementIsActive",A)}}this.particles=[],this.options.parallaxElements&&this.$element.find("[data-stellar-ratio]").each(function(){var Q,P,O,N,M,L,K,J,I,H=D(this),G=0,F=0,E=0,b=0;if(H.data("stellar-elementIsActive")){if(H.data("stellar-elementIsActive")!==this){return}}else{H.data("stellar-elementIsActive",this)}a.options.showElement(H),H.data("stellar-startingLeft")?(H.css("left",H.data("stellar-startingLeft")),H.css("top",H.data("stellar-startingTop"))):(H.data("stellar-startingLeft",H.css("left")),H.data("stellar-startingTop",H.css("top"))),O=H.position().left,N=H.position().top,M="auto"===H.css("margin-left")?0:parseInt(H.css("margin-left"),10),L="auto"===H.css("margin-top")?0:parseInt(H.css("margin-top"),10),J=H.offset().left-M,I=H.offset().top-L,H.parents().each(function(){var c=D(this);return c.data("stellar-offset-parent")===!0?(G=E,F=b,K=c,!1):(E+=c.position().left,void (b+=c.position().top))}),Q=H.data("stellar-horizontal-offset")!==A?H.data("stellar-horizontal-offset"):K!==A&&K.data("stellar-horizontal-offset")!==A?K.data("stellar-horizontal-offset"):a.horizontalOffset,P=H.data("stellar-vertical-offset")!==A?H.data("stellar-vertical-offset"):K!==A&&K.data("stellar-vertical-offset")!==A?K.data("stellar-vertical-offset"):a.verticalOffset,a.particles.push({$element:H,$offsetParent:K,isFixed:"fixed"===H.css("position"),horizontalOffset:Q,verticalOffset:P,startingPositionLeft:O,startingPositionTop:N,startingOffsetLeft:J,startingOffsetTop:I,parentOffsetLeft:G,parentOffsetTop:F,stellarRatio:H.data("stellar-ratio")!==A?H.data("stellar-ratio"):1,width:H.outerWidth(!0),height:H.outerHeight(!0),isHidden:!1})})},_findBackgrounds:function(){var a,h=this,g=this._getScrollLeft(),d=this._getScrollTop();this.backgrounds=[],this.options.parallaxBackgrounds&&(a=this.$element.find("[data-stellar-background-ratio]"),this.$element.data("stellar-background-ratio")&&(a=a.add(this.$element)),a.each(function(){var J,I,H,G,F,E,n,m=D(this),f=q(m),e=0,c=0,L=0,K=0;if(m.data("stellar-backgroundIsActive")){if(m.data("stellar-backgroundIsActive")!==this){return}}else{m.data("stellar-backgroundIsActive",this)}m.data("stellar-backgroundStartingLeft")?r(m,m.data("stellar-backgroundStartingLeft"),m.data("stellar-backgroundStartingTop")):(m.data("stellar-backgroundStartingLeft",f[0]),m.data("stellar-backgroundStartingTop",f[1])),H="auto"===m.css("margin-left")?0:parseInt(m.css("margin-left"),10),G="auto"===m.css("margin-top")?0:parseInt(m.css("margin-top"),10),F=m.offset().left-H-g,E=m.offset().top-G-d,m.parents().each(function(){var i=D(this);return i.data("stellar-offset-parent")===!0?(e=L,c=K,n=i,!1):(L+=i.position().left,void (K+=i.position().top))}),J=m.data("stellar-horizontal-offset")!==A?m.data("stellar-horizontal-offset"):n!==A&&n.data("stellar-horizontal-offset")!==A?n.data("stellar-horizontal-offset"):h.horizontalOffset,I=m.data("stellar-vertical-offset")!==A?m.data("stellar-vertical-offset"):n!==A&&n.data("stellar-vertical-offset")!==A?n.data("stellar-vertical-offset"):h.verticalOffset,h.backgrounds.push({$element:m,$offsetParent:n,isFixed:"fixed"===m.css("background-attachment"),horizontalOffset:J,verticalOffset:I,startingValueLeft:f[0],startingValueTop:f[1],startingBackgroundPositionLeft:isNaN(parseInt(f[0],10))?0:parseInt(f[0],10),startingBackgroundPositionTop:isNaN(parseInt(f[1],10))?0:parseInt(f[1],10),startingPositionLeft:m.position().left,startingPositionTop:m.position().top,startingOffsetLeft:F,startingOffsetTop:E,parentOffsetLeft:e,parentOffsetTop:c,stellarRatio:m.data("stellar-background-ratio")===A?1:m.data("stellar-background-ratio")})}))},_reset:function(){var g,f,j,i,h;for(h=this.particles.length-1;h>=0;h--){g=this.particles[h],f=g.$element.data("stellar-startingLeft"),j=g.$element.data("stellar-startingTop"),this._setPosition(g.$element,f,f,j,j),this.options.showElement(g.$element),g.$element.data("stellar-startingLeft",null).data("stellar-elementIsActive",null).data("stellar-backgroundIsActive",null)}for(h=this.backgrounds.length-1;h>=0;h--){i=this.backgrounds[h],i.$element.data("stellar-backgroundStartingLeft",null).data("stellar-backgroundStartingTop",null),r(i.$element,i.startingValueLeft,i.startingValueTop)}},destroy:function(){this._reset(),this.$scrollElement.unbind("resize."+this.name).unbind("scroll."+this.name),this._animationLoop=D.noop,D(C).unbind("load."+this.name).unbind("resize."+this.name)},_setOffsets:function(){var b=this,a=D(C);a.unbind("resize.horizontal-"+this.name).unbind("resize.vertical-"+this.name),"function"==typeof this.options.horizontalOffset?(this.horizontalOffset=this.options.horizontalOffset(),a.bind("resize.horizontal-"+this.name,function(){b.horizontalOffset=b.options.horizontalOffset()})):this.horizontalOffset=this.options.horizontalOffset,"function"==typeof this.options.verticalOffset?(this.verticalOffset=this.options.verticalOffset(),a.bind("resize.vertical-"+this.name,function(){b.verticalOffset=b.options.verticalOffset()})):this.verticalOffset=this.options.verticalOffset},_repositionElements:function(){var Q,P,O,N,M,L,K,J,I,H,G=this._getScrollLeft(),F=this._getScrollTop(),E=!0,m=!0;if(this.currentScrollLeft!==G||this.currentScrollTop!==F||this.currentWidth!==this.viewportWidth||this.currentHeight!==this.viewportHeight){for(this.currentScrollLeft=G,this.currentScrollTop=F,this.currentWidth=this.viewportWidth,this.currentHeight=this.viewportHeight,H=this.particles.length-1;H>=0;H--){Q=this.particles[H],P=Q.isFixed?1:0,this.options.horizontalScrolling?(L=(G+Q.horizontalOffset+this.viewportOffsetLeft+Q.startingPositionLeft-Q.startingOffsetLeft+Q.parentOffsetLeft)*-(Q.stellarRatio+P-1)+Q.startingPositionLeft,J=L-Q.startingPositionLeft+Q.startingOffsetLeft):(L=Q.startingPositionLeft,J=Q.startingOffsetLeft),this.options.verticalScrolling?(K=(F+Q.verticalOffset+this.viewportOffsetTop+Q.startingPositionTop-Q.startingOffsetTop+Q.parentOffsetTop)*-(Q.stellarRatio+P-1)+Q.startingPositionTop,I=K-Q.startingPositionTop+Q.startingOffsetTop):(K=Q.startingPositionTop,I=Q.startingOffsetTop),this.options.hideDistantElements&&(m=!this.options.horizontalScrolling||J+Q.width>(Q.isFixed?0:G)&&J<(Q.isFixed?0:G)+this.viewportWidth+this.viewportOffsetLeft,E=!this.options.verticalScrolling||I+Q.height>(Q.isFixed?0:F)&&I<(Q.isFixed?0:F)+this.viewportHeight+this.viewportOffsetTop),m&&E?(Q.isHidden&&(this.options.showElement(Q.$element),Q.isHidden=!1),this._setPosition(Q.$element,L,Q.startingPositionLeft,K,Q.startingPositionTop)):Q.isHidden||(this.options.hideElement(Q.$element),Q.isHidden=!0)}for(H=this.backgrounds.length-1;H>=0;H--){O=this.backgrounds[H],P=O.isFixed?0:1,N=this.options.horizontalScrolling?(G+O.horizontalOffset-this.viewportOffsetLeft-O.startingOffsetLeft+O.parentOffsetLeft-O.startingBackgroundPositionLeft)*(P-O.stellarRatio)+"px":O.startingValueLeft,M=this.options.verticalScrolling?(F+O.verticalOffset-this.viewportOffsetTop-O.startingOffsetTop+O.parentOffsetTop-O.startingBackgroundPositionTop)*(P-O.stellarRatio)+"px":O.startingValueTop,r(O.$element,N,M)}}},_handleScrollEvent:function(){var f=this,e=!1,h=function(){f._repositionElements(),e=!1},g=function(){e||(p(h),e=!0)};this.$scrollElement.bind("scroll."+this.name,g),g()},_startAnimationLoop:function(){var b=this;this._animationLoop=function(){p(b._animationLoop),b._repositionElements()},this._animationLoop()}},D.fn[y]=function(a){var d=arguments;return a===A||"object"==typeof a?this.each(function(){D.data(this,"plugin_"+y)||D.data(this,"plugin_"+y,new z(this,a))}):"string"==typeof a&&"_"!==a[0]&&"init"!==a?this.each(function(){var b=D.data(this,"plugin_"+y);b instanceof z&&"function"==typeof b[a]&&b[a].apply(b,Array.prototype.slice.call(d,1)),"destroy"===a&&D.data(this,"plugin_"+y,null)}):void 0},D[y]=function(){var a=D(C);return a.stellar.apply(a,Array.prototype.slice.call(arguments,0))},D[y].scrollProperty=w,D[y].positionProperty=v,C.Stellar=z}(jQuery,this,document);